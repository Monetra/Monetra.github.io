<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mstdlib-1.24.0: Thread Task Pipeline</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Mstdlib-1.24.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__m__thread__pipeline.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Thread Task Pipeline<div class="ingroups"><a class="el" href="group__m__thread.html">Threading Support</a></div></div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga5f66f3888931447a8624ecd88e0dc7ea"><td class="memItemLeft" align="right" valign="top">typedef struct M_thread_pipeline_task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__thread__pipeline.html#ga5f66f3888931447a8624ecd88e0dc7ea">M_thread_pipeline_task_t</a></td></tr>
<tr class="separator:ga5f66f3888931447a8624ecd88e0dc7ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf5ed11f443f83b54d52760f5ba160ef3"><td class="memItemLeft" align="right" valign="top">typedef struct M_thread_pipeline_steps&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__thread__pipeline.html#gaf5ed11f443f83b54d52760f5ba160ef3">M_thread_pipeline_steps_t</a></td></tr>
<tr class="separator:gaf5ed11f443f83b54d52760f5ba160ef3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3049a3c67be21133bf1fd22f8645ea78"><td class="memItemLeft" align="right" valign="top">typedef struct M_thread_pipeline&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__thread__pipeline.html#ga3049a3c67be21133bf1fd22f8645ea78">M_thread_pipeline_t</a></td></tr>
<tr class="separator:ga3049a3c67be21133bf1fd22f8645ea78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga61ac31155728138d8bb933a93a1a82e2"><td class="memItemLeft" align="right" valign="top">typedef M_bool(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__thread__pipeline.html#ga61ac31155728138d8bb933a93a1a82e2">M_thread_pipeline_task_cb</a>) (<a class="el" href="group__m__thread__pipeline.html#ga5f66f3888931447a8624ecd88e0dc7ea">M_thread_pipeline_task_t</a> *task)</td></tr>
<tr class="separator:ga61ac31155728138d8bb933a93a1a82e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1c9abfa4d049bfb03dd492dd701b6b78"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__thread__pipeline.html#ga1c9abfa4d049bfb03dd492dd701b6b78">M_thread_pipeline_taskfinish_cb</a>) (<a class="el" href="group__m__thread__pipeline.html#ga5f66f3888931447a8624ecd88e0dc7ea">M_thread_pipeline_task_t</a> *task, <a class="el" href="group__m__thread__pipeline.html#ga8af34e3a1b04d194a5867cd4354621b1">M_thread_pipeline_result_t</a> result)</td></tr>
<tr class="separator:ga1c9abfa4d049bfb03dd492dd701b6b78"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga77a29808e53dd96ca0b2919b857855e5"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__thread__pipeline.html#ga77a29808e53dd96ca0b2919b857855e5">M_thread_pipeline_flags_t</a> { <br />
&#160;&#160;<a class="el" href="group__m__thread__pipeline.html#gga77a29808e53dd96ca0b2919b857855e5af2886a699ad93eaf643992d2311fe9df">M_THREAD_PIPELINE_FLAG_NONE</a> = 0
, <br />
&#160;&#160;<a class="el" href="group__m__thread__pipeline.html#gga77a29808e53dd96ca0b2919b857855e5a5b829a8ff525c0d0b17c772adb6366ed">M_THREAD_PIPELINE_FLAG_NOABORT</a> = 1 &lt;&lt; 0
<br />
 }</td></tr>
<tr class="separator:ga77a29808e53dd96ca0b2919b857855e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8af34e3a1b04d194a5867cd4354621b1"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__thread__pipeline.html#ga8af34e3a1b04d194a5867cd4354621b1">M_thread_pipeline_result_t</a> { <br />
&#160;&#160;<a class="el" href="group__m__thread__pipeline.html#gga8af34e3a1b04d194a5867cd4354621b1a6439e301050b119d95714e0df1260670">M_THREAD_PIPELINE_RESULT_SUCCESS</a> = 1
, <br />
&#160;&#160;<a class="el" href="group__m__thread__pipeline.html#gga8af34e3a1b04d194a5867cd4354621b1a6d86b7b2467796fc3f09f5bae60c76c8">M_THREAD_PIPELINE_RESULT_FAIL</a> = 2
, <br />
&#160;&#160;<a class="el" href="group__m__thread__pipeline.html#gga8af34e3a1b04d194a5867cd4354621b1acfb2be8ba6ad0e58b3c5c7eb9c9d84ed">M_THREAD_PIPELINE_RESULT_ABORT</a> = 3
<br />
 }</td></tr>
<tr class="separator:ga8af34e3a1b04d194a5867cd4354621b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gab589d6fd7f0499888d310985e499b773"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__m__thread__pipeline.html#gaf5ed11f443f83b54d52760f5ba160ef3">M_thread_pipeline_steps_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__thread__pipeline.html#gab589d6fd7f0499888d310985e499b773">M_thread_pipeline_steps_create</a> (void)</td></tr>
<tr class="separator:gab589d6fd7f0499888d310985e499b773"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac1b386bbd81c85833f735a4500cd8f1b"><td class="memItemLeft" align="right" valign="top">M_bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__thread__pipeline.html#gac1b386bbd81c85833f735a4500cd8f1b">M_thread_pipeline_steps_insert</a> (<a class="el" href="group__m__thread__pipeline.html#gaf5ed11f443f83b54d52760f5ba160ef3">M_thread_pipeline_steps_t</a> *steps, <a class="el" href="group__m__thread__pipeline.html#ga61ac31155728138d8bb933a93a1a82e2">M_thread_pipeline_task_cb</a> task_cb)</td></tr>
<tr class="separator:gac1b386bbd81c85833f735a4500cd8f1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaef12776a3cd6d31b68fa327f7f151973"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__thread__pipeline.html#gaef12776a3cd6d31b68fa327f7f151973">M_thread_pipeline_steps_destroy</a> (<a class="el" href="group__m__thread__pipeline.html#gaf5ed11f443f83b54d52760f5ba160ef3">M_thread_pipeline_steps_t</a> *steps)</td></tr>
<tr class="separator:gaef12776a3cd6d31b68fa327f7f151973"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabd515629cd4b4090b19fe33220538c95"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__m__thread__pipeline.html#ga3049a3c67be21133bf1fd22f8645ea78">M_thread_pipeline_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__thread__pipeline.html#gabd515629cd4b4090b19fe33220538c95">M_thread_pipeline_create</a> (const <a class="el" href="group__m__thread__pipeline.html#gaf5ed11f443f83b54d52760f5ba160ef3">M_thread_pipeline_steps_t</a> *steps, int flags, <a class="el" href="group__m__thread__pipeline.html#ga1c9abfa4d049bfb03dd492dd701b6b78">M_thread_pipeline_taskfinish_cb</a> finish_cb)</td></tr>
<tr class="separator:gabd515629cd4b4090b19fe33220538c95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga85de9080c4a42f403904fe7d71b3daf4"><td class="memItemLeft" align="right" valign="top">M_bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__thread__pipeline.html#ga85de9080c4a42f403904fe7d71b3daf4">M_thread_pipeline_task_insert</a> (<a class="el" href="group__m__thread__pipeline.html#ga3049a3c67be21133bf1fd22f8645ea78">M_thread_pipeline_t</a> *pipeline, <a class="el" href="group__m__thread__pipeline.html#ga5f66f3888931447a8624ecd88e0dc7ea">M_thread_pipeline_task_t</a> *task)</td></tr>
<tr class="separator:ga85de9080c4a42f403904fe7d71b3daf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1c0826b5392901f1b7b1107eafb1bbb7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__thread__pipeline.html#ga1c0826b5392901f1b7b1107eafb1bbb7">M_thread_pipeline_wait</a> (<a class="el" href="group__m__thread__pipeline.html#ga3049a3c67be21133bf1fd22f8645ea78">M_thread_pipeline_t</a> *pipeline, size_t queue_limit)</td></tr>
<tr class="separator:ga1c0826b5392901f1b7b1107eafb1bbb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafe182cebdeab1633720525b2fc2f771a"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__thread__pipeline.html#gafe182cebdeab1633720525b2fc2f771a">M_thread_pipeline_queue_count</a> (<a class="el" href="group__m__thread__pipeline.html#ga3049a3c67be21133bf1fd22f8645ea78">M_thread_pipeline_t</a> *pipeline)</td></tr>
<tr class="separator:gafe182cebdeab1633720525b2fc2f771a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga75511bd884ea2f93c5cbf12015a070bf"><td class="memItemLeft" align="right" valign="top">M_bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__thread__pipeline.html#ga75511bd884ea2f93c5cbf12015a070bf">M_thread_pipeline_status</a> (<a class="el" href="group__m__thread__pipeline.html#ga3049a3c67be21133bf1fd22f8645ea78">M_thread_pipeline_t</a> *pipeline)</td></tr>
<tr class="separator:ga75511bd884ea2f93c5cbf12015a070bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9ee577dcfb468ef4431dc81cbb5d36c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__thread__pipeline.html#ga9ee577dcfb468ef4431dc81cbb5d36c2">M_thread_pipeline_destroy</a> (<a class="el" href="group__m__thread__pipeline.html#ga3049a3c67be21133bf1fd22f8645ea78">M_thread_pipeline_t</a> *pipeline)</td></tr>
<tr class="separator:ga9ee577dcfb468ef4431dc81cbb5d36c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >Implementation of a thread pipeline. Useful if there are a series of tasks which must be completed in order, and each task has one or more CPU or I/O intensive steps. This allows handoff to a dedicated thread for each step, while ensuring each task result is processed in a serialized manner. For CPU intensive workloads this helps in spreading load across multiple CPU cores, and also allows I/O to be embedded into a step that can run without blocking CPU.</p>
<p >Example:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>M_thread_pipeline_task {</div>
<div class="line">   <span class="keyword">const</span> <span class="keywordtype">char</span> *filename;</div>
<div class="line">   M_uint8    *buf;</div>
<div class="line">   <span class="keywordtype">size_t</span>      buf_len;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> finish_cb(<a class="code hl_typedef" href="group__m__thread__pipeline.html#ga5f66f3888931447a8624ecd88e0dc7ea">M_thread_pipeline_task_t</a> *task, <a class="code hl_enumeration" href="group__m__thread__pipeline.html#ga8af34e3a1b04d194a5867cd4354621b1">M_thread_pipeline_result_t</a> result)</div>
<div class="line">{</div>
<div class="line">  <a class="code hl_function" href="group__m__mem.html#gac4b3c1d73d6efe2542f5e729b58a271d">M_free</a>(task-&gt;buf);</div>
<div class="line">  <a class="code hl_function" href="group__m__mem.html#gac4b3c1d73d6efe2542f5e729b58a271d">M_free</a>(task);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> M_bool fetch_cb(<a class="code hl_typedef" href="group__m__thread__pipeline.html#ga5f66f3888931447a8624ecd88e0dc7ea">M_thread_pipeline_task_t</a> *task)</div>
<div class="line">{</div>
<div class="line">   task-&gt;buf = fetch_data(task-&gt;name, &amp;task-&gt;buf_len);</div>
<div class="line">   <span class="keywordflow">if</span> (!task-&gt;buf)</div>
<div class="line">     <span class="keywordflow">return</span> M_FALSE;</div>
<div class="line">   <span class="keywordflow">return</span> M_TRUE;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> M_bool compress_cb(<a class="code hl_typedef" href="group__m__thread__pipeline.html#ga5f66f3888931447a8624ecd88e0dc7ea">M_thread_pipeline_task_t</a> *task)</div>
<div class="line">{</div>
<div class="line">   M_uint8 *uncompressed     = task-&gt;buf;</div>
<div class="line">   <span class="keywordtype">size_t</span>   uncompressed_len = task-&gt;buf_len;</div>
<div class="line"> </div>
<div class="line">   task-&gt;buf = my_compress(uncompressed, uncompressed_len, &amp;task-&gt;buf_len);</div>
<div class="line">   <a class="code hl_function" href="group__m__mem.html#gac4b3c1d73d6efe2542f5e729b58a271d">M_free</a>(uncompressed);</div>
<div class="line">   <span class="keywordflow">if</span> (!task-&gt;buf)</div>
<div class="line">     <span class="keywordflow">return</span> M_FALSE;</div>
<div class="line">   <span class="keywordflow">return</span> M_TRUE;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> M_bool encrypt_cb(<a class="code hl_typedef" href="group__m__thread__pipeline.html#ga5f66f3888931447a8624ecd88e0dc7ea">M_thread_pipeline_task_t</a> *task)</div>
<div class="line">{</div>
<div class="line">   M_uint8 *compressed     = task-&gt;buf;</div>
<div class="line">   <span class="keywordtype">size_t</span>   compressed_len = task-&gt;buf_len;</div>
<div class="line"> </div>
<div class="line">   task-&gt;buf = my_encrypt(compressed, compressed_len, &amp;task-&gt;buf_len);</div>
<div class="line">   <a class="code hl_function" href="group__m__mem.html#gac4b3c1d73d6efe2542f5e729b58a271d">M_free</a>(compressed);</div>
<div class="line">   <span class="keywordflow">if</span> (task-&gt;buf == NULL)</div>
<div class="line">     <span class="keywordflow">return</span> M_FALSE;</div>
<div class="line">   <span class="keywordflow">return</span> M_TRUE;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> M_bool write_cb(<a class="code hl_typedef" href="group__m__thread__pipeline.html#ga5f66f3888931447a8624ecd88e0dc7ea">M_thread_pipeline_task_t</a> *task)</div>
<div class="line">{</div>
<div class="line">   <a class="code hl_typedef" href="group__m__fs__common.html#ga3f48055e7fc13f13df9c6bb9cdebd5fb">M_fs_file_t</a> *fp = NULL;</div>
<div class="line">   <a class="code hl_enumeration" href="group__m__fs__common.html#ga715f9815d0e45a100da4feb7761394cb">M_fs_error_t</a> err = <a class="code hl_enumvalue" href="group__m__fs__common.html#gga715f9815d0e45a100da4feb7761394cbadc03e1ee3655cfea645c66c6342f2a1a">M_FS_ERROR_SUCCESS</a>;</div>
<div class="line">   <span class="keywordtype">char</span> filename[1024];</div>
<div class="line">   <a class="code hl_function" href="group__m__fmt.html#ga148cb889ab2737a09ebf313e7a3d454b">M_snprintf</a>(filename, <span class="keyword">sizeof</span>(filename), <span class="stringliteral">&quot;%s.out&quot;</span>, task-&gt;name);</div>
<div class="line">   err = <a class="code hl_function" href="group__m__fs__file.html#gab765a6b15ae978ec3899234f2df873e5">M_fs_file_open</a>(&amp;fp, task-&gt;name, 0,</div>
<div class="line">                        <a class="code hl_enumvalue" href="group__m__fs__common.html#gga42d679aef8153f47777e00c6d44da706a003155070a43f5f35144a0a012553caf">M_FS_FILE_MODE_READ</a>|<a class="code hl_enumvalue" href="group__m__fs__common.html#gga42d679aef8153f47777e00c6d44da706afca27cb38e231cdfddb674e81d073e6e">M_FS_FILE_MODE_WRITE</a>|<a class="code hl_enumvalue" href="group__m__fs__common.html#gga42d679aef8153f47777e00c6d44da706a4f8da501b2468477a3c3e92a20551958">M_FS_FILE_MODE_OVERWRITE</a>, NULL);</div>
<div class="line">   <span class="keywordflow">if</span> (err != <a class="code hl_enumvalue" href="group__m__fs__common.html#gga715f9815d0e45a100da4feb7761394cbadc03e1ee3655cfea645c66c6342f2a1a">M_FS_ERROR_SUCCESS</a>)</div>
<div class="line">     <span class="keywordflow">goto</span> fail;</div>
<div class="line"> </div>
<div class="line">   err = <a class="code hl_function" href="group__m__fs__file.html#gafbc0fc720e0bd04847d2ea2c3a3adf85">M_fs_file_write</a>(fp, task-&gt;buf, task-&gt;buf_len, &amp;wrote_len, <a class="code hl_enumvalue" href="group__m__fs__common.html#gga0f8cc9e131a2dce01e0a12581bf702fba4af567fbf112ddd63cb1c8dcea0f5967">M_FS_FILE_RW_FULLBUF</a>);</div>
<div class="line">   <span class="keywordflow">if</span> (err == <a class="code hl_enumvalue" href="group__m__fs__common.html#gga715f9815d0e45a100da4feb7761394cbadc03e1ee3655cfea645c66c6342f2a1a">M_FS_ERROR_SUCCESS</a> &amp;&amp; wrote_len != task-&gt;buf_len) {</div>
<div class="line">     err = <a class="code hl_enumvalue" href="group__m__fs__common.html#gga715f9815d0e45a100da4feb7761394cba8115ae131b11416f42355b61d24b83af">M_FS_ERROR_FILE_2BIG</a>;</div>
<div class="line">   }</div>
<div class="line">fail:</div>
<div class="line">    <a class="code hl_function" href="group__m__fs__file.html#ga3bef24378ff0e3a3f71213a2b1647e3e">M_fs_file_close</a>(fp);</div>
<div class="line">    <span class="keywordflow">return</span> err == <a class="code hl_enumvalue" href="group__m__fs__common.html#gga715f9815d0e45a100da4feb7761394cbadc03e1ee3655cfea645c66c6342f2a1a">M_FS_ERROR_SUCCESS</a>?M_TRUE:M_FAIL;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> *tasks[] = {</div>
<div class="line">    <span class="stringliteral">&quot;red&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;white&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;blue&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;yellow&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;green&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;brown&quot;</span>,</div>
<div class="line">    NULL</div>
<div class="line">  };</div>
<div class="line">  <a class="code hl_typedef" href="group__m__thread__pipeline.html#ga3049a3c67be21133bf1fd22f8645ea78">M_thread_pipeline_t</a>       *pipeline = NULL;</div>
<div class="line">  <a class="code hl_typedef" href="group__m__thread__pipeline.html#gaf5ed11f443f83b54d52760f5ba160ef3">M_thread_pipeline_steps_t</a> *steps    = NULL;</div>
<div class="line">  <span class="keywordtype">size_t</span>                     i;</div>
<div class="line"> </div>
<div class="line">  steps = <a class="code hl_function" href="group__m__thread__pipeline.html#gab589d6fd7f0499888d310985e499b773">M_thread_pipeline_steps_create</a>();</div>
<div class="line">  <a class="code hl_function" href="group__m__thread__pipeline.html#gac1b386bbd81c85833f735a4500cd8f1b">M_thread_pipeline_steps_insert</a>(steps, fetch_cb);</div>
<div class="line">  <a class="code hl_function" href="group__m__thread__pipeline.html#gac1b386bbd81c85833f735a4500cd8f1b">M_thread_pipeline_steps_insert</a>(steps, compress_cb);</div>
<div class="line">  <a class="code hl_function" href="group__m__thread__pipeline.html#gac1b386bbd81c85833f735a4500cd8f1b">M_thread_pipeline_steps_insert</a>(steps, encrypt_cb);</div>
<div class="line">  <a class="code hl_function" href="group__m__thread__pipeline.html#gac1b386bbd81c85833f735a4500cd8f1b">M_thread_pipeline_steps_insert</a>(steps, write_cb);</div>
<div class="line"> </div>
<div class="line">  pipeline = <a class="code hl_function" href="group__m__thread__pipeline.html#gabd515629cd4b4090b19fe33220538c95">M_thread_pipeline_create</a>(steps, <a class="code hl_enumvalue" href="group__m__thread__pipeline.html#gga77a29808e53dd96ca0b2919b857855e5af2886a699ad93eaf643992d2311fe9df">M_THREAD_PIPELINE_FLAG_NONE</a>, finish_cb);</div>
<div class="line">  <a class="code hl_function" href="group__m__thread__pipeline.html#gaef12776a3cd6d31b68fa327f7f151973">M_thread_pipeline_steps_destroy</a>(steps);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">for</span> (i=0; tasks[i] != NULL; i++) {</div>
<div class="line">    <a class="code hl_typedef" href="group__m__thread__pipeline.html#ga5f66f3888931447a8624ecd88e0dc7ea">M_thread_pipeline_task_t</a> *task = <a class="code hl_function" href="group__m__mem.html#ga35c94b89c8d56bc0486c91773a0e0b4c">M_malloc_zero</a>(<span class="keyword">sizeof</span>(*task));</div>
<div class="line">    task-&gt;name = tasks[i];</div>
<div class="line">    <a class="code hl_function" href="group__m__thread__pipeline.html#ga85de9080c4a42f403904fe7d71b3daf4">M_thread_pipeline_task_insert</a>(pipeline, task);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_function" href="group__m__thread__pipeline.html#ga1c0826b5392901f1b7b1107eafb1bbb7">M_thread_pipeline_wait</a>(pipeline, 0);</div>
<div class="line">  <a class="code hl_function" href="group__m__thread__pipeline.html#ga9ee577dcfb468ef4431dc81cbb5d36c2">M_thread_pipeline_destroy</a>(pipeline);</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__m__fmt_html_ga148cb889ab2737a09ebf313e7a3d454b"><div class="ttname"><a href="group__m__fmt.html#ga148cb889ab2737a09ebf313e7a3d454b">M_snprintf</a></div><div class="ttdeci">size_t M_snprintf(char *buf, size_t size, const char *fmt,...)</div></div>
<div class="ttc" id="agroup__m__fs__common_html_ga3f48055e7fc13f13df9c6bb9cdebd5fb"><div class="ttname"><a href="group__m__fs__common.html#ga3f48055e7fc13f13df9c6bb9cdebd5fb">M_fs_file_t</a></div><div class="ttdeci">struct M_fs_file M_fs_file_t</div><div class="ttdef"><b>Definition:</b> m_fs.h:132</div></div>
<div class="ttc" id="agroup__m__fs__common_html_ga715f9815d0e45a100da4feb7761394cb"><div class="ttname"><a href="group__m__fs__common.html#ga715f9815d0e45a100da4feb7761394cb">M_fs_error_t</a></div><div class="ttdeci">M_fs_error_t</div><div class="ttdef"><b>Definition:</b> m_fs.h:154</div></div>
<div class="ttc" id="agroup__m__fs__common_html_gga0f8cc9e131a2dce01e0a12581bf702fba4af567fbf112ddd63cb1c8dcea0f5967"><div class="ttname"><a href="group__m__fs__common.html#gga0f8cc9e131a2dce01e0a12581bf702fba4af567fbf112ddd63cb1c8dcea0f5967">M_FS_FILE_RW_FULLBUF</a></div><div class="ttdeci">@ M_FS_FILE_RW_FULLBUF</div><div class="ttdef"><b>Definition:</b> m_fs.h:263</div></div>
<div class="ttc" id="agroup__m__fs__common_html_gga42d679aef8153f47777e00c6d44da706a003155070a43f5f35144a0a012553caf"><div class="ttname"><a href="group__m__fs__common.html#gga42d679aef8153f47777e00c6d44da706a003155070a43f5f35144a0a012553caf">M_FS_FILE_MODE_READ</a></div><div class="ttdeci">@ M_FS_FILE_MODE_READ</div><div class="ttdef"><b>Definition:</b> m_fs.h:247</div></div>
<div class="ttc" id="agroup__m__fs__common_html_gga42d679aef8153f47777e00c6d44da706a4f8da501b2468477a3c3e92a20551958"><div class="ttname"><a href="group__m__fs__common.html#gga42d679aef8153f47777e00c6d44da706a4f8da501b2468477a3c3e92a20551958">M_FS_FILE_MODE_OVERWRITE</a></div><div class="ttdeci">@ M_FS_FILE_MODE_OVERWRITE</div><div class="ttdef"><b>Definition:</b> m_fs.h:251</div></div>
<div class="ttc" id="agroup__m__fs__common_html_gga42d679aef8153f47777e00c6d44da706afca27cb38e231cdfddb674e81d073e6e"><div class="ttname"><a href="group__m__fs__common.html#gga42d679aef8153f47777e00c6d44da706afca27cb38e231cdfddb674e81d073e6e">M_FS_FILE_MODE_WRITE</a></div><div class="ttdeci">@ M_FS_FILE_MODE_WRITE</div><div class="ttdef"><b>Definition:</b> m_fs.h:248</div></div>
<div class="ttc" id="agroup__m__fs__common_html_gga715f9815d0e45a100da4feb7761394cba8115ae131b11416f42355b61d24b83af"><div class="ttname"><a href="group__m__fs__common.html#gga715f9815d0e45a100da4feb7761394cba8115ae131b11416f42355b61d24b83af">M_FS_ERROR_FILE_2BIG</a></div><div class="ttdeci">@ M_FS_ERROR_FILE_2BIG</div><div class="ttdef"><b>Definition:</b> m_fs.h:167</div></div>
<div class="ttc" id="agroup__m__fs__common_html_gga715f9815d0e45a100da4feb7761394cbadc03e1ee3655cfea645c66c6342f2a1a"><div class="ttname"><a href="group__m__fs__common.html#gga715f9815d0e45a100da4feb7761394cbadc03e1ee3655cfea645c66c6342f2a1a">M_FS_ERROR_SUCCESS</a></div><div class="ttdeci">@ M_FS_ERROR_SUCCESS</div><div class="ttdef"><b>Definition:</b> m_fs.h:155</div></div>
<div class="ttc" id="agroup__m__fs__file_html_ga3bef24378ff0e3a3f71213a2b1647e3e"><div class="ttname"><a href="group__m__fs__file.html#ga3bef24378ff0e3a3f71213a2b1647e3e">M_fs_file_close</a></div><div class="ttdeci">void M_fs_file_close(M_fs_file_t *fd)</div></div>
<div class="ttc" id="agroup__m__fs__file_html_gab765a6b15ae978ec3899234f2df873e5"><div class="ttname"><a href="group__m__fs__file.html#gab765a6b15ae978ec3899234f2df873e5">M_fs_file_open</a></div><div class="ttdeci">M_fs_error_t M_fs_file_open(M_fs_file_t **fd, const char *path, size_t buf_size, M_uint32 mode, const M_fs_perms_t *perms)</div></div>
<div class="ttc" id="agroup__m__fs__file_html_gafbc0fc720e0bd04847d2ea2c3a3adf85"><div class="ttname"><a href="group__m__fs__file.html#gafbc0fc720e0bd04847d2ea2c3a3adf85">M_fs_file_write</a></div><div class="ttdeci">M_fs_error_t M_fs_file_write(M_fs_file_t *fd, const unsigned char *buf, size_t count, size_t *wrote_len, M_uint32 flags)</div></div>
<div class="ttc" id="agroup__m__mem_html_ga35c94b89c8d56bc0486c91773a0e0b4c"><div class="ttname"><a href="group__m__mem.html#ga35c94b89c8d56bc0486c91773a0e0b4c">M_malloc_zero</a></div><div class="ttdeci">void * M_malloc_zero(size_t size) M_ALLOC_SIZE(1) M_WARN_UNUSED_RESULT M_MALLOC</div></div>
<div class="ttc" id="agroup__m__mem_html_gac4b3c1d73d6efe2542f5e729b58a271d"><div class="ttname"><a href="group__m__mem.html#gac4b3c1d73d6efe2542f5e729b58a271d">M_free</a></div><div class="ttdeci">void M_free(void *ptr) M_FREE(1)</div></div>
<div class="ttc" id="agroup__m__thread__pipeline_html_ga1c0826b5392901f1b7b1107eafb1bbb7"><div class="ttname"><a href="group__m__thread__pipeline.html#ga1c0826b5392901f1b7b1107eafb1bbb7">M_thread_pipeline_wait</a></div><div class="ttdeci">void M_thread_pipeline_wait(M_thread_pipeline_t *pipeline, size_t queue_limit)</div></div>
<div class="ttc" id="agroup__m__thread__pipeline_html_ga3049a3c67be21133bf1fd22f8645ea78"><div class="ttname"><a href="group__m__thread__pipeline.html#ga3049a3c67be21133bf1fd22f8645ea78">M_thread_pipeline_t</a></div><div class="ttdeci">struct M_thread_pipeline M_thread_pipeline_t</div><div class="ttdef"><b>Definition:</b> m_thread_pipeline.h:173</div></div>
<div class="ttc" id="agroup__m__thread__pipeline_html_ga5f66f3888931447a8624ecd88e0dc7ea"><div class="ttname"><a href="group__m__thread__pipeline.html#ga5f66f3888931447a8624ecd88e0dc7ea">M_thread_pipeline_task_t</a></div><div class="ttdeci">struct M_thread_pipeline_task M_thread_pipeline_task_t</div><div class="ttdef"><b>Definition:</b> m_thread_pipeline.h:163</div></div>
<div class="ttc" id="agroup__m__thread__pipeline_html_ga85de9080c4a42f403904fe7d71b3daf4"><div class="ttname"><a href="group__m__thread__pipeline.html#ga85de9080c4a42f403904fe7d71b3daf4">M_thread_pipeline_task_insert</a></div><div class="ttdeci">M_bool M_thread_pipeline_task_insert(M_thread_pipeline_t *pipeline, M_thread_pipeline_task_t *task)</div></div>
<div class="ttc" id="agroup__m__thread__pipeline_html_ga8af34e3a1b04d194a5867cd4354621b1"><div class="ttname"><a href="group__m__thread__pipeline.html#ga8af34e3a1b04d194a5867cd4354621b1">M_thread_pipeline_result_t</a></div><div class="ttdeci">M_thread_pipeline_result_t</div><div class="ttdef"><b>Definition:</b> m_thread_pipeline.h:182</div></div>
<div class="ttc" id="agroup__m__thread__pipeline_html_ga9ee577dcfb468ef4431dc81cbb5d36c2"><div class="ttname"><a href="group__m__thread__pipeline.html#ga9ee577dcfb468ef4431dc81cbb5d36c2">M_thread_pipeline_destroy</a></div><div class="ttdeci">void M_thread_pipeline_destroy(M_thread_pipeline_t *pipeline)</div></div>
<div class="ttc" id="agroup__m__thread__pipeline_html_gab589d6fd7f0499888d310985e499b773"><div class="ttname"><a href="group__m__thread__pipeline.html#gab589d6fd7f0499888d310985e499b773">M_thread_pipeline_steps_create</a></div><div class="ttdeci">M_thread_pipeline_steps_t * M_thread_pipeline_steps_create(void)</div></div>
<div class="ttc" id="agroup__m__thread__pipeline_html_gabd515629cd4b4090b19fe33220538c95"><div class="ttname"><a href="group__m__thread__pipeline.html#gabd515629cd4b4090b19fe33220538c95">M_thread_pipeline_create</a></div><div class="ttdeci">M_thread_pipeline_t * M_thread_pipeline_create(const M_thread_pipeline_steps_t *steps, int flags, M_thread_pipeline_taskfinish_cb finish_cb)</div></div>
<div class="ttc" id="agroup__m__thread__pipeline_html_gac1b386bbd81c85833f735a4500cd8f1b"><div class="ttname"><a href="group__m__thread__pipeline.html#gac1b386bbd81c85833f735a4500cd8f1b">M_thread_pipeline_steps_insert</a></div><div class="ttdeci">M_bool M_thread_pipeline_steps_insert(M_thread_pipeline_steps_t *steps, M_thread_pipeline_task_cb task_cb)</div></div>
<div class="ttc" id="agroup__m__thread__pipeline_html_gaef12776a3cd6d31b68fa327f7f151973"><div class="ttname"><a href="group__m__thread__pipeline.html#gaef12776a3cd6d31b68fa327f7f151973">M_thread_pipeline_steps_destroy</a></div><div class="ttdeci">void M_thread_pipeline_steps_destroy(M_thread_pipeline_steps_t *steps)</div></div>
<div class="ttc" id="agroup__m__thread__pipeline_html_gaf5ed11f443f83b54d52760f5ba160ef3"><div class="ttname"><a href="group__m__thread__pipeline.html#gaf5ed11f443f83b54d52760f5ba160ef3">M_thread_pipeline_steps_t</a></div><div class="ttdeci">struct M_thread_pipeline_steps M_thread_pipeline_steps_t</div><div class="ttdef"><b>Definition:</b> m_thread_pipeline.h:168</div></div>
<div class="ttc" id="agroup__m__thread__pipeline_html_gga77a29808e53dd96ca0b2919b857855e5af2886a699ad93eaf643992d2311fe9df"><div class="ttname"><a href="group__m__thread__pipeline.html#gga77a29808e53dd96ca0b2919b857855e5af2886a699ad93eaf643992d2311fe9df">M_THREAD_PIPELINE_FLAG_NONE</a></div><div class="ttdeci">@ M_THREAD_PIPELINE_FLAG_NONE</div><div class="ttdef"><b>Definition:</b> m_thread_pipeline.h:155</div></div>
</div><!-- fragment --> <h2 class="groupheader">Typedef Documentation</h2>
<a id="ga5f66f3888931447a8624ecd88e0dc7ea" name="ga5f66f3888931447a8624ecd88e0dc7ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5f66f3888931447a8624ecd88e0dc7ea">&#9670;&nbsp;</a></span>M_thread_pipeline_task_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct M_thread_pipeline_task <a class="el" href="group__m__thread__pipeline.html#ga5f66f3888931447a8624ecd88e0dc7ea">M_thread_pipeline_task_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gaf5ed11f443f83b54d52760f5ba160ef3" name="gaf5ed11f443f83b54d52760f5ba160ef3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf5ed11f443f83b54d52760f5ba160ef3">&#9670;&nbsp;</a></span>M_thread_pipeline_steps_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct M_thread_pipeline_steps <a class="el" href="group__m__thread__pipeline.html#gaf5ed11f443f83b54d52760f5ba160ef3">M_thread_pipeline_steps_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga3049a3c67be21133bf1fd22f8645ea78" name="ga3049a3c67be21133bf1fd22f8645ea78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3049a3c67be21133bf1fd22f8645ea78">&#9670;&nbsp;</a></span>M_thread_pipeline_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct M_thread_pipeline <a class="el" href="group__m__thread__pipeline.html#ga3049a3c67be21133bf1fd22f8645ea78">M_thread_pipeline_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga61ac31155728138d8bb933a93a1a82e2" name="ga61ac31155728138d8bb933a93a1a82e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga61ac31155728138d8bb933a93a1a82e2">&#9670;&nbsp;</a></span>M_thread_pipeline_task_cb</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef M_bool(* M_thread_pipeline_task_cb) (<a class="el" href="group__m__thread__pipeline.html#ga5f66f3888931447a8624ecd88e0dc7ea">M_thread_pipeline_task_t</a> *task)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >User-defined callback for each step </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">task</td><td>User-defined task data to be operated on </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>M_TRUE if completed successfully, M_FALSE otherwise </dd></dl>

</div>
</div>
<a id="ga1c9abfa4d049bfb03dd492dd701b6b78" name="ga1c9abfa4d049bfb03dd492dd701b6b78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1c9abfa4d049bfb03dd492dd701b6b78">&#9670;&nbsp;</a></span>M_thread_pipeline_taskfinish_cb</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* M_thread_pipeline_taskfinish_cb) (<a class="el" href="group__m__thread__pipeline.html#ga5f66f3888931447a8624ecd88e0dc7ea">M_thread_pipeline_task_t</a> *task, <a class="el" href="group__m__thread__pipeline.html#ga8af34e3a1b04d194a5867cd4354621b1">M_thread_pipeline_result_t</a> result)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >User-defined, and required, callback at the completion of each task. This may be called:</p><ul>
<li>Upon completion of task, whether successful or not (see result)</li>
<li>Upon abort due to a prior task failure if the pipeline is configured to abort all other tasks if a single task fails (default). At a minimum, this must free any memory associated with the user-defined task structure.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">task</td><td>User-defined task structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">result</td><td>the result of the task, one of M_thread_pipeline_result_t. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga77a29808e53dd96ca0b2919b857855e5" name="ga77a29808e53dd96ca0b2919b857855e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga77a29808e53dd96ca0b2919b857855e5">&#9670;&nbsp;</a></span>M_thread_pipeline_flags_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__m__thread__pipeline.html#ga77a29808e53dd96ca0b2919b857855e5">M_thread_pipeline_flags_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Flags for pipeline initialization </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga77a29808e53dd96ca0b2919b857855e5af2886a699ad93eaf643992d2311fe9df" name="gga77a29808e53dd96ca0b2919b857855e5af2886a699ad93eaf643992d2311fe9df"></a>M_THREAD_PIPELINE_FLAG_NONE&#160;</td><td class="fielddoc"><p >No flags, normal operation </p>
</td></tr>
<tr><td class="fieldname"><a id="gga77a29808e53dd96ca0b2919b857855e5a5b829a8ff525c0d0b17c772adb6366ed" name="gga77a29808e53dd96ca0b2919b857855e5a5b829a8ff525c0d0b17c772adb6366ed"></a>M_THREAD_PIPELINE_FLAG_NOABORT&#160;</td><td class="fielddoc"><p >Do not abort all other enqueued tasks due to a failure of another task </p>
</td></tr>
</table>

</div>
</div>
<a id="ga8af34e3a1b04d194a5867cd4354621b1" name="ga8af34e3a1b04d194a5867cd4354621b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8af34e3a1b04d194a5867cd4354621b1">&#9670;&nbsp;</a></span>M_thread_pipeline_result_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__m__thread__pipeline.html#ga8af34e3a1b04d194a5867cd4354621b1">M_thread_pipeline_result_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Result codes passed to <a class="el" href="group__m__thread__pipeline.html#ga1c9abfa4d049bfb03dd492dd701b6b78">M_thread_pipeline_taskfinish_cb()</a> </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga8af34e3a1b04d194a5867cd4354621b1a6439e301050b119d95714e0df1260670" name="gga8af34e3a1b04d194a5867cd4354621b1a6439e301050b119d95714e0df1260670"></a>M_THREAD_PIPELINE_RESULT_SUCCESS&#160;</td><td class="fielddoc"><p >Task completed successfully </p>
</td></tr>
<tr><td class="fieldname"><a id="gga8af34e3a1b04d194a5867cd4354621b1a6d86b7b2467796fc3f09f5bae60c76c8" name="gga8af34e3a1b04d194a5867cd4354621b1a6d86b7b2467796fc3f09f5bae60c76c8"></a>M_THREAD_PIPELINE_RESULT_FAIL&#160;</td><td class="fielddoc"><p >Task failed &ndash; record error in user-defined task structure </p>
</td></tr>
<tr><td class="fieldname"><a id="gga8af34e3a1b04d194a5867cd4354621b1acfb2be8ba6ad0e58b3c5c7eb9c9d84ed" name="gga8af34e3a1b04d194a5867cd4354621b1acfb2be8ba6ad0e58b3c5c7eb9c9d84ed"></a>M_THREAD_PIPELINE_RESULT_ABORT&#160;</td><td class="fielddoc"><p >Task was forcibly aborted due to a failure of another task, or <a class="el" href="group__m__thread__pipeline.html#ga9ee577dcfb468ef4431dc81cbb5d36c2">M_thread_pipeline_destroy()</a> was called before completion </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gab589d6fd7f0499888d310985e499b773" name="gab589d6fd7f0499888d310985e499b773"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab589d6fd7f0499888d310985e499b773">&#9670;&nbsp;</a></span>M_thread_pipeline_steps_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__m__thread__pipeline.html#gaf5ed11f443f83b54d52760f5ba160ef3">M_thread_pipeline_steps_t</a> * M_thread_pipeline_steps_create </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Initialize an empty pipeline step list </p><dl class="section return"><dt>Returns</dt><dd>initialized and empty step list. NULL on failure. freed with <a class="el" href="group__m__thread__pipeline.html#gaef12776a3cd6d31b68fa327f7f151973">M_thread_pipeline_steps_destroy()</a> </dd></dl>

</div>
</div>
<a id="gac1b386bbd81c85833f735a4500cd8f1b" name="gac1b386bbd81c85833f735a4500cd8f1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac1b386bbd81c85833f735a4500cd8f1b">&#9670;&nbsp;</a></span>M_thread_pipeline_steps_insert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_bool M_thread_pipeline_steps_insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__thread__pipeline.html#gaf5ed11f443f83b54d52760f5ba160ef3">M_thread_pipeline_steps_t</a> *&#160;</td>
          <td class="paramname"><em>steps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__m__thread__pipeline.html#ga61ac31155728138d8bb933a93a1a82e2">M_thread_pipeline_task_cb</a>&#160;</td>
          <td class="paramname"><em>task_cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Insert a step into the task pipeline</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">steps</td><td>Initialized pipeline steps structure from <a class="el" href="group__m__thread__pipeline.html#gab589d6fd7f0499888d310985e499b773">M_thread_pipeline_steps_create()</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">task_cb</td><td>Task to perform </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>M_TRUE on success, M_FALSE on usage error. </dd></dl>

</div>
</div>
<a id="gaef12776a3cd6d31b68fa327f7f151973" name="gaef12776a3cd6d31b68fa327f7f151973"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaef12776a3cd6d31b68fa327f7f151973">&#9670;&nbsp;</a></span>M_thread_pipeline_steps_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void M_thread_pipeline_steps_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__thread__pipeline.html#gaf5ed11f443f83b54d52760f5ba160ef3">M_thread_pipeline_steps_t</a> *&#160;</td>
          <td class="paramname"><em>steps</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Destroy the task step list initialized with <a class="el" href="group__m__thread__pipeline.html#gab589d6fd7f0499888d310985e499b773">M_thread_pipeline_steps_create()</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">steps</td><td>Initialized piipeline steps structure from <a class="el" href="group__m__thread__pipeline.html#gab589d6fd7f0499888d310985e499b773">M_thread_pipeline_steps_create()</a> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gabd515629cd4b4090b19fe33220538c95" name="gabd515629cd4b4090b19fe33220538c95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabd515629cd4b4090b19fe33220538c95">&#9670;&nbsp;</a></span>M_thread_pipeline_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__m__thread__pipeline.html#ga3049a3c67be21133bf1fd22f8645ea78">M_thread_pipeline_t</a> * M_thread_pipeline_create </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__m__thread__pipeline.html#gaf5ed11f443f83b54d52760f5ba160ef3">M_thread_pipeline_steps_t</a> *&#160;</td>
          <td class="paramname"><em>steps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__m__thread__pipeline.html#ga1c9abfa4d049bfb03dd492dd701b6b78">M_thread_pipeline_taskfinish_cb</a>&#160;</td>
          <td class="paramname"><em>finish_cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Initialize the thread pipeline with the various steps to be performed for each task. This will spawn one thread per step and immediately start all threads. There is no additional function to start the pipeline other than to insert each task to be processed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">steps</td><td>Pointer to steps to perform for each task. The passed in pointer is internally duplicated, so it may be destroyed immediately after this function returns. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>One or more pipeline flags from M_thread_pipeline_flags_t </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">finish_cb</td><td>Callback to be called after each task is completed. At a minimum, this should free the memory assocated with the task pointer. The finish_cb is not called from the same thread as enqueued it so proper thread concurrency protections (e.g. mutexes) must be in place. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>initialized M_thread_pipeline_t or NULL on failure (usage, thread limits) </dd></dl>

</div>
</div>
<a id="ga85de9080c4a42f403904fe7d71b3daf4" name="ga85de9080c4a42f403904fe7d71b3daf4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga85de9080c4a42f403904fe7d71b3daf4">&#9670;&nbsp;</a></span>M_thread_pipeline_task_insert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_bool M_thread_pipeline_task_insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__thread__pipeline.html#ga3049a3c67be21133bf1fd22f8645ea78">M_thread_pipeline_t</a> *&#160;</td>
          <td class="paramname"><em>pipeline</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__m__thread__pipeline.html#ga5f66f3888931447a8624ecd88e0dc7ea">M_thread_pipeline_task_t</a> *&#160;</td>
          <td class="paramname"><em>task</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Insert a task into the thread pipeline.</p>
<p >This function will enqueue tasks into an internal task list indefinitely and will not block. If it is desirable to cap the enqueued task list, please see <a class="el" href="group__m__thread__pipeline.html#ga1c0826b5392901f1b7b1107eafb1bbb7">M_thread_pipeline_wait()</a> and <a class="el" href="group__m__thread__pipeline.html#gafe182cebdeab1633720525b2fc2f771a">M_thread_pipeline_queue_count()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pipeline</td><td>Pointer to the initialized thread pipeline returned from <a class="el" href="group__m__thread__pipeline.html#gabd515629cd4b4090b19fe33220538c95">M_thread_pipeline_create()</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">task</td><td>User-defined task structure describing task to be perfomed for each step. It is the responsibility of the user to define their own private struct M_thread_pipeline_task with all members and necessary state tracking to perform each step callback. It is guaranteed that no more than 1 step will be accessing this structure in parallel. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>M_TRUE if task is inserted, M_FALSE on either usage error or if task could not be enqueued as a prior step had failed. </dd></dl>

</div>
</div>
<a id="ga1c0826b5392901f1b7b1107eafb1bbb7" name="ga1c0826b5392901f1b7b1107eafb1bbb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1c0826b5392901f1b7b1107eafb1bbb7">&#9670;&nbsp;</a></span>M_thread_pipeline_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void M_thread_pipeline_wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__thread__pipeline.html#ga3049a3c67be21133bf1fd22f8645ea78">M_thread_pipeline_t</a> *&#160;</td>
          <td class="paramname"><em>pipeline</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>queue_limit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Wait pipeline tasks/steps to complete to the task queue limit specified. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pipeline</td><td>Pipeline initialized with <a class="el" href="group__m__thread__pipeline.html#gabd515629cd4b4090b19fe33220538c95">M_thread_pipeline_create()</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">queue_limit</td><td>Will block until the queued task list is reduced to at least this size. Use 0 to wait until all tasks are completed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gafe182cebdeab1633720525b2fc2f771a" name="gafe182cebdeab1633720525b2fc2f771a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafe182cebdeab1633720525b2fc2f771a">&#9670;&nbsp;</a></span>M_thread_pipeline_queue_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t M_thread_pipeline_queue_count </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__thread__pipeline.html#ga3049a3c67be21133bf1fd22f8645ea78">M_thread_pipeline_t</a> *&#160;</td>
          <td class="paramname"><em>pipeline</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Count of queued tasks, this includes the task currently being processed if any. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pipeline</td><td>Pipeline initialized with <a class="el" href="group__m__thread__pipeline.html#gabd515629cd4b4090b19fe33220538c95">M_thread_pipeline_create()</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>count of queued tasks. </dd></dl>

</div>
</div>
<a id="ga75511bd884ea2f93c5cbf12015a070bf" name="ga75511bd884ea2f93c5cbf12015a070bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga75511bd884ea2f93c5cbf12015a070bf">&#9670;&nbsp;</a></span>M_thread_pipeline_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_bool M_thread_pipeline_status </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__thread__pipeline.html#ga3049a3c67be21133bf1fd22f8645ea78">M_thread_pipeline_t</a> *&#160;</td>
          <td class="paramname"><em>pipeline</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Retrieve if the pipeline is in a good state. The only time a pipeline will not be in a good state is if a step failed. </p><dl class="section return"><dt>Returns</dt><dd>M_TRUE if in a good state </dd></dl>

</div>
</div>
<a id="ga9ee577dcfb468ef4431dc81cbb5d36c2" name="ga9ee577dcfb468ef4431dc81cbb5d36c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9ee577dcfb468ef4431dc81cbb5d36c2">&#9670;&nbsp;</a></span>M_thread_pipeline_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void M_thread_pipeline_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__thread__pipeline.html#ga3049a3c67be21133bf1fd22f8645ea78">M_thread_pipeline_t</a> *&#160;</td>
          <td class="paramname"><em>pipeline</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Destroy the thread pipeline. If there are any outstanding tasks/steps, they will be aborted and return an abort error code to their finish_cb </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pipeline</td><td>Pipeline initialized with <a class="el" href="group__m__thread__pipeline.html#gabd515629cd4b4090b19fe33220538c95">M_thread_pipeline_create()</a> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Aug 15 2023 12:53:12 for Mstdlib-1.24.0 by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
